<html lang="en">
  <head>
    <link
      href="https://cdn.jsdelivr.net/npm/simple-datatables@7.1.2/dist/style.min.css"
      rel="stylesheet"
    />
    {% load static %}
    <link href={% static 'css/styles.css' %} rel="stylesheet" />
    <script
      src="https://use.fontawesome.com/releases/v6.3.0/js/all.js"
      crossorigin="anonymous"
    ></script>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>


  <body>
    <table id="datatablesSimple">
        <thead>
            <tr>
              <th>equipment_id</th>
              <th>equipment_name</th>
              <th>category</th>
              <th>assigned_user</th>
              <th>last_assigned</th>
              <th>viewDetails</th>
            </tr>
        </thead>
        <tfoot>
            <tr>
              <th>equipment_id</th>
              <th>equipment_name</th>
              <th>category</th>
              <th>assigned_user</th>
              <th>last_assigned</th>
              <th>viewDetails</th>
            </tr>
        </tfoot>
        <tbody>
            
        </tbody>

        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/simple-datatables@7.1.2/dist/umd/simple-datatables.min.js" crossorigin="anonymous"></script>
        {% comment %} <script src={% static 'js/datatables-simple-demo.js' %}></script> {% endcomment %}
          <script>
            document.addEventListener("DOMContentLoaded", function () {
              fetch("/api/data/")
                .then((response) => response.json())
                .then((data) => {
                  console.log(data.data)
                  const myTable = document.querySelector("#datatablesSimple");
                  const dataTable = new simpleDatatables.DataTable(myTable, {
                    data: {
                      data: data.data,
                    },
                    columns: [
                      { select: 0, sort: "asc", title: "equipment_id" },
                      { select: 1, title: "equipment_name" },
                      { select: 2, title: "category" },
                      { select: 3, title: "assigned_user" },
                      { select: 4, title: "last_assigned" },
                      {
                        select: 5,
                        title: "viewDetails",
                        render: function (data, cell, row) {
                          return `<a href="/equipment/${row[0]}/">View Details</a>`;
                        },
                      },
                    ],
                  });
                })
                .catch((error) => {
                  console.error("Error fetching data:", error);
                });
            });

        </script>
  </body>
</html>
