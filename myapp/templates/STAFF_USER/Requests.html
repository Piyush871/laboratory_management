
{% extends 'STAFF_USER/base_staff_user.html' %} {% block content %}
<html>
    <head>
        {% load static %}
<link href="https://fonts.googleapis.com/css?family=Nunito:200,300,400,600,700,900" rel="stylesheet">
<link rel="stylesheet" type="text/css" href="{% static 'css/requestsStyle.css' %}">
    </head>
    <body>
        <div id="layoutSidenav_content">
            <main>
                <div class="container">
                        <div class="search-bar d-flex align-items-center mt-4">
                                <input type="text" id="search" class="form-control"  placeholder="Search..."/>
                                <button class="btn btn-primary" id="AllocReqButton" >AllocationReq</button>
                                <button class="btn btn-primary" id="DeallocReqButton">DeallocationReq</button>
                        </div>
                        
                        
                        <div class="keep-cards mt-4" id="allocation-requests-container">
                            <div class="row request-row">
                                {% for allocation_request in allocation_requests %}
                                <div class="col-md-4" data-name="{{allocation_request.allocation_request.user.name}}">
                                    <div class="card card-1" style="background-image: url({% static allocation_request.image %})">
                                        <h3 id="user_name" >{{allocation_request.allocation_request.user.name}}</h3>
                                        <div class="card-body">
                                            <h5 class="card-title">{{ allocation_request.allocation_request.equipment.id }}</h5>
                                            <p class="card-text">{{allocation_request.allocation_request.equipment.equipment_name}}</p>
                                            <p class="card-text">{{allocation_request.allocation_request.timestamp}}</p>
                                            <button class="btn btn-primary" onclick="handleRequest(1010, 'approve')">Approve</button>
                                            <button class="btn btn-danger" onclick="handleRequest(${item.id}, 'reject')">Reject</button>
                                            <button class="btn btn-warning" onclick="handleRequest(${item.id}, 'reject')">Details</button>
                                        </div>
                                    </div>
                                </div>
                                {% endfor %}
                            </div>
                        </div>
                        
                        <div class="keep-cards mt-4" id="deallocation-requests-container" style="display: none;">
                            <div class="row request-row">
                                {% for deallocation_request in deallocation_requests %}
                                <div class="col-md-4" data-name="{{deallocation_request.allocation_request.user.name}}">
                                    <div class="card card-1" style="background-image: url({% static deallocation_request.image %})">
                                        <h3 id="user_name" >{{deallocation_request.allocation_request.user.name}}</h3>
                                        <div class="card-body">
                                            <h5 class="card-title">{{ deallocation_request.allocation_request.equipment.id }}</h5>
                                            <p class="card-text">{{deallocation_request.allocation_request.equipment.equipment_name}}</p>
                                            <p class="card-text">{{deallocation_request.allocation_request.timestamp}}</p>
                                            <button class="btn btn-primary" onclick="handleRequest(1010, 'approve')">Approve</button>
                                            <button class="btn btn-danger" onclick="handleRequest(${item.id}, 'reject')">Reject</button>
                                            <button class="btn btn-warning" onclick="handleRequest(${item.id}, 'reject')">Details</button>
                                        </div>
                                    </div>
                                </div>
                                {% endfor %}
                            </div>
                        </div>
                        
        </div>
      </main>
    </div>
    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
{% endblock %}
{% block staticFiles %}
<!-- home.html -->
<script src={% static 'js/requestsScript.js' %}></script>
{% endblock staticFiles %}

